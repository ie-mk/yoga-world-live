module.exports=function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){e.exports=require("firebase")},function(e,t){e.exports=require("react")},function(e,t,r){e.exports=r(3)},function(e,t,r){"use strict";r.r(t);var o={};r.r(o),r.d(o,"createResource",(function(){return b})),r.d(o,"createResourceWithId",(function(){return U})),r.d(o,"updateResource",(function(){return v})),r.d(o,"fetchResource",(function(){return R})),r.d(o,"fetchResources",(function(){return j})),r.d(o,"deleteResource",(function(){return k})),r.d(o,"storageUploadImages",(function(){return O})),r.d(o,"updateAdImages",(function(){return x})),r.d(o,"deleteAdImage",(function(){return E}));var n={};r.r(n),r.d(n,"fetchUsers",(function(){return S})),r.d(n,"fetchUserProfile",(function(){return B})),r.d(n,"createUserProfile",(function(){return _})),r.d(n,"updateUserProfile",(function(){return M})),r.d(n,"updateProfilePicture",(function(){return N})),r.d(n,"addUserPermission",(function(){return $})),r.d(n,"fetchUserPermissions",(function(){return D})),r.d(n,"deleteUser",(function(){return F})),r.d(n,"logout",(function(){return L}));var a={};r.r(a),r.d(a,"sendEmail",(function(){return z}));var c=r(0),s=r.n(c);const i={apiKey:"AIzaSyCn54J9froK-yiSyB5BbcqQnGFNEt85mUo",authDomain:"yoga-world-live.firebaseapp.com",databaseURL:"https://yoga-world-live.firebaseio.com",projectId:"yoga-world-live",storageBucket:"yoga-world-live.appspot.com",messagingSenderId:"122125080422",appId:"1:122125080422:web:2fec405aac2c97f2cd9aa7",measurementId:"G-LR63GPBXMJ"};var l=r(1),u=r.n(l);const d="undefined"==typeof window,f={notAssigned:"Please select",beginner:"Beginner",intermediate:"Intermediate",advanced:"Advanced"},p=(Object.keys(f).map(e=>u.a.createElement("option",{key:e,value:e},f[e])),{notAssigned:"Please select",hatha:"Hatha Yoga",kundalini:"Kundalini Yoga",raja:"Raja Yoga"});Object.keys(p).reduce((e,t)=>(e[p[t].replace(" ","")]=t,e),{}),Object.keys(p).map(e=>u.a.createElement("option",{key:e,value:e},p[e]));let g={};if(!d){s.a.initializeApp(i);const e=s.a.database(),t=s.a.storage().ref(),r=s.a.firestore(),o=s.a.auth();g={db:e,storage:t,firestore:r,firebase:s.a,auth:o}}var h={db:()=>{},storage:()=>{},firestore:()=>{},firebase:()=>{},...g};const{storage:m,firestore:y,auth:w,firebase:P}=h,b=async(e,t)=>{if(Object.keys(t).length)try{let r=y;e.split("/").forEach((e,t)=>r=(t+1)%2!=0?r.collection(e):r.doc(e));const o=r.doc(),n=o.id,a=t.imagesToUpload;if(a&&a.length){const e=t.imageUploadPath;delete t.imageUploadPath,delete t.imagesToUpload,t.images=await O(e,a),await o.set(t)}else await o.set(t);return console.log("-----create resource success: ",n),n}catch(e){console.error("create Resource error",e)}},U=async(e,t,r)=>{if(Object.keys(r).length)try{let o=y;e.split("/").forEach((e,t)=>o=(t+1)%2!=0?o.collection(e):o.doc(e));const n=o.doc(t),a=r.imagesToUpload;if(a&&a.length){const e=r.imageUploadPath;delete r.imageUploadPath,delete r.imagesToUpload,r.images=await O(e,a),await n.set(r)}else await n.set(r);return console.log("-----create resource success: ",t),t}catch(e){console.error("create Resource error",e)}},v=async(e,t)=>{try{let r=y;e.split("/").forEach((e,t)=>r=(t+1)%2!=0?r.collection(e):r.doc(e));const o=t.imagesToUpload;if(o&&o.length){const e=t.imageUploadPath;delete t.imageUploadPath,delete t.imagesToUpload,t.images=await O(e,o)}return await r.update(t),Promise.resolve("ok")}catch(e){console.error("updateAd error: ",e)}},R=async e=>{try{let t=y;e.split("/").forEach((e,r)=>t=(r+1)%2!=0?t.collection(e):t.doc(e));const r=await t.get();if(r.exists)return console.log("----data: ",r.data()),r.data();console.log("No such document!")}catch(e){throw e}},j=async(e,t={})=>{const r={};try{let o=y;e.split("/").forEach((e,t)=>o=(t+1)%2!=0?o.collection(e):o.doc(e)),Object.keys(t).forEach(e=>{const[r,n]=t[e];o=o.where(e,r,n)});return(await o.get()).forEach(e=>{r[e.id]=e.data()}),console.log("--fetched Resources: ",r),r}catch(e){console.log("---- fetch Resources error: ",e)}},k=async e=>{try{let t=y;e.split("/").forEach((e,r)=>t=(r+1)%2!=0?t.collection(e):t.doc(e)),await t.delete(),console.log("---- delete resource success: ")}catch(e){throw e}},O=(e,t)=>{const r=w.currentUser.uid;if(!t.length)return Promise.resolve([]);const o=[],n=Object.keys(t).map(n=>{const a=t[n];return new Promise((t,n)=>{((t,n,a)=>{const c=(new Date).getTime(),s=m.child(`${e}/${r}/${c}`);s.put(t).then(()=>{s.getDownloadURL().then(e=>{o.push(e),n()})},e=>a(e))})(a,t,n)})});return Promise.all(n).then(()=>o).catch(e=>console.error(e))},x=async({adId:e,images:t})=>{const r=await O(e,t);try{const t=y.collection("ads").doc(e);return await t.update({images:P.firestore.FieldValue.arrayUnion(...r)}),Promise.resolve("ok")}catch(e){console.log("updateAdImages error: ",e)}},E=async({adId:e,imgUrl:t})=>{try{await(async e=>{if(!e)return;const t="images"+e.split("?")[0].split("images")[1].replace(/%2F/g,"/");try{const e=m.child(t);return await e.delete(),Promise.Resolve("delete success")}catch(e){return Promise.resolve("image delete error: ",e)}})(t);const r=y.collection("ads").doc(e);return await r.update({images:P.firestore.FieldValue.arrayRemove(t)}),Promise.resolve("ok")}catch(e){console.log("delete image error: ",e)}};d||(window.fetchResources=j,window.fetchResource=R,window.updateResource=v,window.createResource=b,window.deleteResource=k);const{firestore:I,auth:T,storage:A}=h,S=async()=>{const e={};try{(await I.collection("users").get()).forEach(t=>{e[t.id]=t.data()})}catch(e){console.log("---- fetch Users error: ",e)}return console.log("--fetched Users: ",e),e};async function B(e){let t=I.collection("users").doc(e);try{const e=await t.get();return!!e.exists&&e.data()}catch(e){console.log("---- fetchUserProfile error: ",e)}}async function _(e){let t=I.collection("users").doc(e.uid);try{await t.set(e)}catch(e){console.log("---- createUserProfile error: ",e)}}async function M(e){let t=I.collection("users").doc(e.uid);try{return await t.update(e)}catch(e){console.log("---- updateUserProfile error: ",e)}}const N=async(e,t)=>{if(!e||!t)return;const r=I.collection("users").doc(e);let o=null;return new Promise((r,n)=>{((t,r,n)=>{A.child(`images/${e}/profilePicture`).put(t).then(e=>{e.ref.getDownloadURL().then(e=>{o=e,r()})},e=>n(e))})(t,r,n)}).then(()=>r.update({profileImage:o})).catch(e=>(console.error("------updateProfilePicture error",e),e))},$=async({uid:e,permission:t})=>{try{const r=I.collection("permissions").doc(e);(await r.get()).exists?r.update(t):r.set(t)}catch(e){throw e.toString()}};async function D(e){let t=I.collection("permissions").doc(e);try{const r=await t.get();return!!r.exists&&{uid:e,data:r.data()}}catch(e){console.log("---- fetchUserPermissions error: ",e)}}const F=async e=>{try{return await I.collection("users").doc(e).delete(),Promise.resolve("ok")}catch(e){return Promise.reject("error: "+e)}},L=()=>T.signOut(),q=h.auth;function z(e){((e,t,r)=>{new Promise((o,n)=>{q.currentUser.getToken().then(n=>{const a=new Headers;a.append("Authorization","Bearer "+n),a.append("Content-Type","application/json"),fetch("https://us-central1-lawbook-e9997.cloudfunctions.net/expressApp/sendEmail",{method:"POST",mode:"cors",headers:a,body:JSON.stringify({addressees:e,text:t,subject:r})}).then(e=>{o(e),console.log("sendEmail response: ",e)})})})})(["justinas.simutis@gmail.com"],`New user with the following email: ${e}, has registered on the property rent website.`,"New user registration")}t.default={resource:o,user:n,email:a,firebase:h.firebase}}]);